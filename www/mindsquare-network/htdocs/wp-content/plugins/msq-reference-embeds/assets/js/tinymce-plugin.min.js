"use strict";(function($){var errorClass="re-FieldGroup-Description-error";tinymce.create("tinymce.plugins.msqReferenceEmbeds",{init:function init(editor,url){editor.addButton("msqEmbedReference",{title:"Referenz einbetten",cmd:"msqEmbedReferenceCmd",icon:"fa fa-commenting"});var options="";editor.addCommand("msqEmbedReferenceCmd",function(){tinymce.activeEditor.windowManager.open({title:"Referenz einbetten",minHeight:400,html:"\n<div class=\"re-Editor\">\n\t<div class=\"re-FieldGroup\">\n\t\t<label class=\"re-FieldGroup-Label\" for=\"reference-with-text\">Mit Text?</label>\n\t\t<p class=\"re-FieldGroup-Description\">Soll der Slider mit oder ohne Text ausgespielt werden?</p>\t\t\t\n\t\t<input class=\"re-FieldGroup-Field\" id=\"reference-with-text\" type=\"checkbox\" checked/>\n\t</div>\n\t<div class=\"re-FieldGroup\">\n\t\t<label class=\"re-FieldGroup-Label\" for=\"reference-title\">Titel</label>\n\t\t<p class=\"re-FieldGroup-Description\">Wird \xFCber dem Slider ausgespielt</p>\n\t\t<input class=\"re-FieldGroup-Field\" id=\"reference-title\" type=\"text\"/>\n\t</div>\n\t<div class=\"re-FieldGroup re-FieldGroup-vertical\">\n\t\t<label class=\"re-FieldGroup-Label\" for=\"reference-selection\">Referenzen</label>\n\t\t<p id=\"re-selection-description\" class=\"re-FieldGroup-Description\">Mindestens 3 ausw\xE4hlen</p>\n\t\t<select class=\"re-FieldGroup-Field\" id=\"reference-selection\" multiple>\n\t\t\t".concat(options,"\n\t\t</select>\n\t</div>\n</div>"),buttons:[{text:"Hinzuf\xFCgen",onclick:function onclick(){var selectionDescription=document.querySelector("#re-selection-description");if(referenceSelection.select2("data").length<3){selectionDescription.classList.add(errorClass);return}selectionDescription.classList.remove(errorClass);var idString=referenceSelection.val();var titleString=withText.checked&&title.value?title.value:"";var textString=withText.checked?"":" with-text=\"false\"";var text="[referenzen_slider ids=\"".concat(idString,"\"").concat(textString,"]").concat(titleString,"[/referenzen_slider]");tinyMCE.activeEditor.selection.setContent(text);tinyMCE.activeEditor.windowManager.close()}},{text:"Schlie\xDFen",onclick:"close"}]});var selectionDescription=document.querySelector("#re-selection-description");var withText=document.querySelector("#reference-with-text");var title=document.querySelector("#reference-title");var titleGroup=title.closest(".re-FieldGroup");var referenceSelection=$("#reference-selection");withText.addEventListener("click",function(event){titleGroup.classList.toggle("hide")});referenceSelection.select2({theme:"default re-FieldGroup-Field"});var appendOptions=function appendOptions(references){for(var id in references){if(references.hasOwnProperty(id)){var option=document.createElement("option");option.value=id;option.innerHTML=references[id];referenceSelection[0].appendChild(option)}}};if(window.msqRe&&window.msqRe.hasOwnProperty("references")){appendOptions(window.msqRe.references)}else{referenceSelection.prop("disabled",true);var oldDesc=selectionDescription.innerHTML;selectionDescription.innerHTML="Referenzen werden geladen";$.ajax({url:ajaxurl,data:{"action":"get_successes"},method:"POST",dataType:"JSON",async:true,success:function success(names){window.msqRe={references:names};appendOptions(names);referenceSelection.prop("disabled",false);selectionDescription.innerHTML=oldDesc}})}})}});tinymce.PluginManager.add("msqReferenceEmbeds",tinymce.plugins.msqReferenceEmbeds)})(jQuery);

//# sourceMappingURL=tinymce-plugin.min.js.map